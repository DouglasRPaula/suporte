"use strict";(self.webpackChunksuporte=self.webpackChunksuporte||[]).push([[214],{5214:(e,a,o)=>{o.r(a),o.d(a,{default:()=>v});var t=o(3003),r=o(359),n=o(4282),s=o(8602),c=o(3814),i=o(1072),d=o(5958),l=o(5043),m=o(3216),h=o(7080);const p=400;var u=o(9238),x=o(579);function v(){const e=(0,t.wA)(),{chamado:a,errorMessage:o,aoEnviar:v,aoVoltar:j,handleSwitchChange:g}=function(){const e=(0,t.d4)((e=>e.chamado)),a=(0,t.wA)(),o=(0,m.Zp)(),[r,n]=(0,l.useState)(!1),[s,c]=(0,l.useState)(""),i=e=>e&&e instanceof Date&&!isNaN(e.getTime())?e.toISOString():"",d=(0,l.useCallback)((async t=>{if(t.preventDefault(),!e)return void c("chamado is undefined");const{dataInicio:n,dataEncerramento:s}=e,d=new Date(n);if(new Date(s)<d)return void c("A data de encerramento n\xe3o pode ser anterior \xe0 data de in\xedcio.");const l={...e,chamadoEncerrado:r};a((0,h.mf)(l));const m=i(new Date(e.dataInicio)),u=i(new Date(e.dataEncerramento)),x=await fetch("http://localhost:5000/chamados/adicionar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...l,dataInicio:m,dataEncerramento:u})});if(x.status!==p)a((0,h.o)()),a((0,h.vL)(l)),o("/chamados");else{const e=await x.json();a((0,h.Wk)({error:e.error}))}}),[e,r,a,o]),u=(0,l.useCallback)((e=>{e.preventDefault(),o("/chamados")}),[o]),x=(0,l.useCallback)((e=>{const o=e.target.checked;n(e.target.checked),a((0,h.Wk)({campo:"chamadoEncerrado",valor:o}))}),[a]);return{chamado:e,errorMessage:s,aoEnviar:d,aoVoltar:u,handleSwitchChange:x}}(),{chamadoEncerrado:C}=a;return(0,x.jsxs)("div",{className:"ml-sm-auto",children:[(0,x.jsx)("div",{className:"my-2",children:(0,x.jsx)("div",{className:"d-flex justify-content-between flex-nowrap align-items-center pb-2 mb-3 border-bottom",children:(0,x.jsx)("h1",{className:"h4 mb-0",children:"Cadastro de chamados"})})}),(0,x.jsxs)(c.A,{id:"cadastroForm",onSubmit:v,children:[o&&(0,x.jsx)(u.A,{message:o}),(0,x.jsx)(i.A,{className:"mb-3",children:(0,x.jsxs)(c.A.Group,{as:s.A,md:"12",children:[(0,x.jsx)(c.A.Label,{children:"N\xfamero do chamado"}),(0,x.jsx)("input",{required:!0,type:"text",className:"form-control",placeholder:"N\xfamero do chamado",id:"numeroChamado",onChange:a=>e((0,h.Wk)({campo:"numeroChamado",valor:a.target.value}))}),(0,x.jsx)(c.A.Label,{children:"Empresa"}),(0,x.jsx)(r.A,{options:d.empresas,onChange:a=>e((0,h.Wk)({campo:"empresa",valor:a.target.value}))}),(0,x.jsx)(c.A.Label,{children:"Contrato"}),(0,x.jsx)(r.A,{options:d.contratos,onChange:a=>e((0,h.Wk)({campo:"contrato",valor:a.target.value}))}),(0,x.jsx)(c.A.Label,{children:"Data de In\xedcio"}),(0,x.jsx)(c.A.Control,{required:!0,type:"datetime-local",min:"2000-01-01T00:00",onChange:a=>e((0,h.Wk)({campo:"dataInicio",valor:a.target.value}))}),(0,x.jsx)(c.A.Label,{children:"Solicitante"}),(0,x.jsx)(c.A.Control,{required:!0,type:"text",placeholder:"Digite o nome do solicitante",onChange:a=>e((0,h.Wk)({campo:"solicitante",valor:a.target.value}))}),(0,x.jsx)(c.A.Label,{children:"Criticidade revisada"}),(0,x.jsx)(r.A,{options:d.criticidades,onChange:a=>e((0,h.Wk)({campo:"criticidadeRevisada",valor:a.target.value}))}),(0,x.jsx)(c.A.Label,{children:"Data de encerramento"}),(0,x.jsx)(c.A.Control,{min:"2000-01-01T00:00",max:"2099-12-31T00:00",type:"datetime-local",onChange:a=>e((0,h.Wk)({campo:"dataEncerramento",valor:a.target.value}))}),(0,x.jsx)(c.A.Label,{children:"Chamado encerrado?"}),(0,x.jsx)(c.A.Check,{type:"switch",label:C?"Sim":"N\xe3o",checked:C,onChange:g}),(0,x.jsx)(c.A.Label,{children:"Tipo de chamado"}),(0,x.jsx)(r.A,{options:d.tipoChamado,onChange:a=>e((0,h.Wk)({campo:"tipoChamado",valor:a.target.value}))}),(0,x.jsx)(c.A.Label,{children:"Descri\xe7\xe3o do chamado"}),(0,x.jsx)("textarea",{id:"descricaoChamado",required:!0,rows:"3",type:"text",className:"form-control",onChange:a=>e((0,h.Wk)({campo:"descricaoChamado",valor:a.target.value}))})]})}),(0,x.jsxs)("div",{className:"m-1",children:[(0,x.jsx)(n.A,{size:"sm",variant:"success",type:"submit",children:"Enviar"})," ",(0,x.jsx)(n.A,{size:"sm",onClick:j,children:"Cancelar"})]})]})]})}},359:(e,a,o)=>{o.d(a,{A:()=>r});var t=o(579);function r(e){let{value:a,options:o,onChange:r}=e;return(0,t.jsxs)("select",{className:"form-select",value:a,required:!0,onChange:r,children:[(0,t.jsx)("option",{value:"",children:"Selecione uma op\xe7\xe3o"}),Object.entries(o).map((e=>{let[a,o]=e;return(0,t.jsx)("option",{value:a,children:o},a)}))]})}},9238:(e,a,o)=>{o.d(a,{A:()=>n});var t=o(5483),r=o(579);function n(e){let{message:a}=e;return(0,r.jsx)(t.A,{variant:"danger",style:{position:"fixed",top:"20px",right:"20px",zIndex:9999},children:a})}}}]);
//# sourceMappingURL=214.341156a8.chunk.js.map